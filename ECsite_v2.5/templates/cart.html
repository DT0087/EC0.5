<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>カート一覧</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/items.css') }}">
</head>

<body>

    <div class="app-container">
        <header>
            <div class="logo">この世とあの世をつなぐ</div>
        </header>

        <nav>
            <a href="/">ホーム</a>
            <a href="/items">商品一覧</a>
            <a href="/dependencies">依頼一覧</a>
            <a href="/mypage">マイページ</a>
        </nav>

        <div class="welcome-message">
            <h2>{{ session.get('username') }} さん、ようこそ！</h2>
            <a href="{{ url_for('logout') }}" class="logout-btn">ログアウト</a>
        </div>

        <div class="cart-container">

            <h2>カート一覧</h2>

            {% if items|length == 0 and dependencies|length == 0 %}
            <p>カートに商品・依頼がありません。</p>
            {% else %}

            <!-- 商品一覧 -->
            {% for item in items %}
            <div class="cart-item">
                <img src="{{ url_for('static', filename=item.image_url) }}">
                <div class="cart-info">
                    <strong>[商品]</strong><br>
                    {{ item.name }}<br>
                    <div class="cart-price">¥{{ item.price }}</div>
                </div>
                <a href="{{ url_for('remove_from_cart', item_type='item', item_id=item.id) }}"
                    class="cart-delete">削除</a>
            </div>
            {% endfor %}

            <!-- 依頼一覧 -->
            {% for dep in dependencies %}
            <div class="cart-item">
                <img src="{{ url_for('static', filename=dep.image_url) }}">
                <div class="cart-info">
                    <strong>[依頼]</strong><br>
                    {{ dep.name }}<br>
                    <div class="cart-price">¥{{ dep.price }}</div>
                </div>
                <a href="{{ url_for('remove_from_cart', item_type='dependency', item_id=dep.id) }}"
                    class="cart-delete">削除</a>
            </div>
            {% endfor %}

            <div class="total-price">合計金額：¥{{ total_price }}</div>

            <a href="{{ url_for('checkout') }}" class="btn-checkout">購入手続きへ</a>

            {% endif %}

            <a href="{{ url_for('items_list') }}" class="back-link">← 商品一覧に戻る</a>
        </div>
        <footer>
            © 2025 この世とあの世をつなぐ App
        </footer>
    </div>

</body>

</html>